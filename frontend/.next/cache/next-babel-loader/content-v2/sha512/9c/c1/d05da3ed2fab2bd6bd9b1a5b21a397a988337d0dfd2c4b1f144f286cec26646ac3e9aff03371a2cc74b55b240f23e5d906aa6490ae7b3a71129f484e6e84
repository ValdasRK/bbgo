{"ast":null,"code":"import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport List from '@material-ui/core/List';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { queryStrategies } from \"../api/bbgo\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst useStyles = makeStyles(theme => ({\n  strategyCard: {\n    margin: theme.spacing(1)\n  },\n  formControl: {\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1),\n    minWidth: 120\n  },\n  buttons: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n    marginTop: theme.spacing(2),\n    paddingTop: theme.spacing(2),\n    paddingBottom: theme.spacing(2),\n    '& > *': {\n      marginLeft: theme.spacing(1)\n    }\n  }\n}));\n\nfunction configToTable(config) {\n  const rows = Object.getOwnPropertyNames(config).map(k => {\n    return {\n      key: k,\n      val: config[k]\n    };\n  });\n  return /*#__PURE__*/_jsx(TableContainer, {\n    children: /*#__PURE__*/_jsxs(Table, {\n      \"aria-label\": \"strategy attributes\",\n      children: [/*#__PURE__*/_jsx(TableHead, {\n        children: /*#__PURE__*/_jsxs(TableRow, {\n          children: [/*#__PURE__*/_jsx(TableCell, {\n            children: \"Field\"\n          }), /*#__PURE__*/_jsx(TableCell, {\n            align: \"right\",\n            children: \"Value\"\n          })]\n        })\n      }), /*#__PURE__*/_jsx(TableBody, {\n        children: rows.map(row => /*#__PURE__*/_jsxs(TableRow, {\n          children: [/*#__PURE__*/_jsx(TableCell, {\n            component: \"th\",\n            scope: \"row\",\n            children: row.key\n          }), /*#__PURE__*/_jsx(TableCell, {\n            align: \"right\",\n            children: row.val\n          })]\n        }, row.key))\n      })]\n    })\n  });\n}\n\nexport default function ReviewStrategies({\n  onBack,\n  onNext\n}) {\n  const classes = useStyles();\n  const [strategies, setStrategies] = React.useState([]);\n  React.useEffect(() => {\n    queryStrategies(strategies => {\n      setStrategies(strategies || []);\n    }).catch(err => {\n      console.error(err);\n    });\n  }, []);\n  const items = strategies.map((o, i) => {\n    const mounts = o.on || [];\n    delete o.on;\n    const config = o[o.strategy];\n    const titleComps = [o.strategy.toUpperCase()];\n\n    if (config.symbol) {\n      titleComps.push(config.symbol);\n    }\n\n    const title = titleComps.join(\" \");\n    return /*#__PURE__*/_jsxs(Card, {\n      className: classes.strategyCard,\n      children: [/*#__PURE__*/_jsx(CardHeader, {\n        avatar: /*#__PURE__*/_jsx(Avatar, {\n          \"aria-label\": \"strategy\",\n          children: \"G\"\n        }),\n        action: /*#__PURE__*/_jsx(IconButton, {\n          \"aria-label\": \"settings\",\n          children: /*#__PURE__*/_jsx(MoreVertIcon, {})\n        }),\n        title: title,\n        subheader: `Exchange ${mounts.map(m => m.toUpperCase())}`\n      }), /*#__PURE__*/_jsxs(CardContent, {\n        children: [/*#__PURE__*/_jsxs(Typography, {\n          variant: \"body2\",\n          color: \"textSecondary\",\n          component: \"p\",\n          children: [\"Strategy will be executed on session \", mounts.join(','), \" with the following configuration:\"]\n        }), configToTable(config)]\n      })]\n    }, i);\n  });\n  return /*#__PURE__*/_jsxs(React.Fragment, {\n    children: [/*#__PURE__*/_jsx(Typography, {\n      variant: \"h6\",\n      gutterBottom: true,\n      children: \"Review Strategies\"\n    }), /*#__PURE__*/_jsx(List, {\n      component: \"nav\",\n      children: items\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: classes.buttons,\n      children: [/*#__PURE__*/_jsx(Button, {\n        onClick: () => {\n          if (onBack) {\n            onBack();\n          }\n        },\n        children: \"Add New Strategy\"\n      }), /*#__PURE__*/_jsx(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: () => {\n          if (onNext) {\n            onNext();\n          }\n        },\n        children: \"Next\"\n      })]\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}