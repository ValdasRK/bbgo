{"ast":null,"code":"import React, { useState } from 'react';\nimport { useRouter } from 'next/router';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport TotalAssetsPie from '../components/TotalAssetsPie';\nimport TotalAssetSummary from '../components/TotalAssetsSummary';\nimport TotalAssetDetails from '../components/TotalAssetsDetails';\nimport TradingVolumePanel from '../components/TradingVolumePanel';\nimport ExchangeSessionTabPanel from '../components/ExchangeSessionTabPanel';\nimport DashboardLayout from '../layouts/DashboardLayout';\nimport { queryAssets, querySessions } from \"../api/bbgo\";\nimport { ChainId, DAppProvider } from '@usedapp/core';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst useStyles = makeStyles(theme => ({\n  totalAssetsSummary: {\n    margin: theme.spacing(2),\n    padding: theme.spacing(2)\n  },\n  grid: {\n    flexGrow: 1\n  },\n  control: {\n    padding: theme.spacing(2)\n  }\n}));\nconst config = {\n  readOnlyChainId: ChainId.Mainnet,\n  readOnlyUrls: {\n    [ChainId.Mainnet]: 'https://mainnet.infura.io/v3/9aa3d95b3bc440fa88ea12eaa4456161'\n  }\n}; // props are pageProps passed from _app.tsx\n\nexport default function Home() {\n  const classes = useStyles();\n  const router = useRouter();\n  const {\n    0: assets,\n    1: setAssets\n  } = useState({});\n  const [sessions, setSessions] = React.useState([]);\n  React.useEffect(() => {\n    querySessions(sessions => {\n      if (sessions && sessions.length > 0) {\n        setSessions(sessions);\n        queryAssets(setAssets);\n      } else {\n        router.push(\"/setup\");\n      }\n    }).catch(err => {\n      console.error(err);\n    });\n  }, [router]);\n\n  if (sessions.length == 0) {\n    return /*#__PURE__*/_jsx(DashboardLayout, {\n      children: /*#__PURE__*/_jsx(Box, {\n        m: 4,\n        children: /*#__PURE__*/_jsx(Typography, {\n          variant: \"h4\",\n          gutterBottom: true,\n          children: \"Loading\"\n        })\n      })\n    });\n  }\n\n  console.log(\"index: assets\", assets);\n  return /*#__PURE__*/_jsx(DAppProvider, {\n    config: config,\n    children: /*#__PURE__*/_jsxs(DashboardLayout, {\n      children: [/*#__PURE__*/_jsxs(Paper, {\n        className: classes.totalAssetsSummary,\n        children: [/*#__PURE__*/_jsx(Typography, {\n          variant: \"h4\",\n          gutterBottom: true,\n          children: \"Total Assets\"\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: classes.grid,\n          children: /*#__PURE__*/_jsxs(Grid, {\n            container: true,\n            direction: \"row\",\n            justify: \"space-around\",\n            alignItems: \"flex-start\",\n            spacing: 1,\n            children: [/*#__PURE__*/_jsxs(Grid, {\n              item: true,\n              xs: 12,\n              md: 8,\n              children: [/*#__PURE__*/_jsx(TotalAssetSummary, {\n                assets: assets\n              }), /*#__PURE__*/_jsx(TotalAssetsPie, {\n                assets: assets\n              })]\n            }), /*#__PURE__*/_jsx(Grid, {\n              item: true,\n              xs: 12,\n              md: 4,\n              children: /*#__PURE__*/_jsx(TotalAssetDetails, {\n                assets: assets\n              })\n            })]\n          })\n        })]\n      }), /*#__PURE__*/_jsx(TradingVolumePanel, {}), /*#__PURE__*/_jsx(ExchangeSessionTabPanel, {})]\n    })\n  });\n}","map":null,"metadata":{},"sourceType":"module"}