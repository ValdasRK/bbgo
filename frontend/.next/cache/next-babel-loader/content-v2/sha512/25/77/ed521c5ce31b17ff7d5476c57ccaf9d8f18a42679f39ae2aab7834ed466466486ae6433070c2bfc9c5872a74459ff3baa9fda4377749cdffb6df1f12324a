{"ast":null,"code":"import _slicedToArray from \"/Users/austin/Desktop/bbgo/frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"/Users/austin/Desktop/bbgo/frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"/Users/austin/Desktop/bbgo/frontend/pages/_app.tsx\",\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Head from 'next/head';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Box from '@material-ui/core/Box';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport theme from '../src/theme';\nimport '../styles/globals.css';\nimport { querySessions, querySyncStatus } from \"../api/bbgo\";\nimport { ChainId } from '@usedapp/core';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar SyncNotStarted = 0;\nvar Syncing = 1;\nvar SyncDone = 2; // session is configured, check if we're syncing data\n\nvar syncStatusPoller = null;\nvar config = {\n  readOnlyChainId: ChainId.Mainnet,\n  readOnlyUrls: _defineProperty({}, ChainId.Mainnet, 'https://mainnet.infura.io/v3/62687d1a985d4508b2b7a24827551934')\n};\nexport default function MyApp(props) {\n  _s();\n\n  var Component = props.Component,\n      pageProps = props.pageProps;\n\n  var _React$useState = React.useState(true),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      loading = _React$useState2[0],\n      setLoading = _React$useState2[1];\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      syncing = _React$useState4[0],\n      setSyncing = _React$useState4[1];\n\n  React.useEffect(function () {\n    // Remove the server-side injected CSS.\n    var jssStyles = document.querySelector('#jss-server-side');\n\n    if (jssStyles) {\n      jssStyles.parentElement.removeChild(jssStyles);\n    }\n\n    querySessions(function (sessions) {\n      if (sessions.length > 0) {\n        setSyncing(true);\n\n        var pollSyncStatus = function pollSyncStatus() {\n          querySyncStatus(function (status) {\n            switch (status) {\n              case SyncNotStarted:\n                break;\n\n              case Syncing:\n                setSyncing(true);\n                break;\n\n              case SyncDone:\n                clearInterval(syncStatusPoller);\n                setLoading(false);\n                setSyncing(false);\n                break;\n            }\n          })[\"catch\"](function (err) {\n            console.error(err);\n          });\n        };\n\n        syncStatusPoller = setInterval(pollSyncStatus, 1000);\n      } else {\n        // no session found, so we can not sync any data\n        setLoading(false);\n        setSyncing(false);\n      }\n    })[\"catch\"](function (err) {\n      console.error(err);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: [/*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"BBGO\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        name: \"viewport\",\n        content: \"minimum-scale=1, initial-scale=1, width=device-width\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(ThemeProvider, {\n      theme: theme,\n      children: [/*#__PURE__*/_jsxDEV(CssBaseline, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }, this), loading ? syncing ? /*#__PURE__*/_jsxDEV(React.Fragment, {\n        children: /*#__PURE__*/_jsxDEV(Dialog, {\n          open: syncing,\n          \"aria-labelledby\": \"alert-dialog-title\",\n          \"aria-describedby\": \"alert-dialog-description\",\n          children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n            id: \"alert-dialog-title\",\n            children: \"Syncing Trades\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n            children: [/*#__PURE__*/_jsxDEV(DialogContentText, {\n              id: \"alert-dialog-description\",\n              children: \"The environment is syncing trades from the exchange sessions. Please wait a moment...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              m: 2,\n              children: /*#__PURE__*/_jsxDEV(LinearProgress, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 45\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 33\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 29\n      }, this) : /*#__PURE__*/_jsxDEV(React.Fragment, {\n        children: /*#__PURE__*/_jsxDEV(Dialog, {\n          open: loading,\n          \"aria-labelledby\": \"alert-dialog-title\",\n          \"aria-describedby\": \"alert-dialog-description\",\n          children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n            id: \"alert-dialog-title\",\n            children: \"Loading\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n            children: [/*#__PURE__*/_jsxDEV(DialogContentText, {\n              id: \"alert-dialog-description\",\n              children: \"Loading...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              m: 2,\n              children: /*#__PURE__*/_jsxDEV(LinearProgress, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 45\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 33\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 29\n      }, this) : /*#__PURE__*/_jsxDEV(Component, _objectSpread({}, pageProps), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 29\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 13\n  }, this);\n}\n\n_s(MyApp, \"WVYdb+UQe6YYiGhzfxLAl1U+vDw=\");\n\n_c = MyApp;\nMyApp.propTypes = {\n  Component: PropTypes.elementType.isRequired,\n  pageProps: PropTypes.object.isRequired\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"MyApp\");","map":{"version":3,"sources":["/Users/austin/Desktop/bbgo/frontend/pages/_app.tsx"],"names":["React","PropTypes","Head","ThemeProvider","Dialog","DialogContent","DialogContentText","DialogTitle","LinearProgress","Box","CssBaseline","theme","querySessions","querySyncStatus","ChainId","SyncNotStarted","Syncing","SyncDone","syncStatusPoller","config","readOnlyChainId","Mainnet","readOnlyUrls","MyApp","props","Component","pageProps","useState","loading","setLoading","syncing","setSyncing","useEffect","jssStyles","document","querySelector","parentElement","removeChild","sessions","length","pollSyncStatus","status","clearInterval","err","console","error","setInterval","propTypes","elementType","isRequired","object"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport Head from 'next/head';\n\nimport {ThemeProvider} from '@material-ui/core/styles';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Box from '@material-ui/core/Box';\n\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport theme from '../src/theme';\nimport '../styles/globals.css'\nimport {querySessions, querySyncStatus} from \"../api/bbgo\";\nimport {Sync} from \"@material-ui/icons\";\n\nimport { ChainId, Config, DAppProvider } from '@usedapp/core';\n\nconst SyncNotStarted = 0\nconst Syncing = 1\nconst SyncDone = 2\n\n// session is configured, check if we're syncing data\nlet syncStatusPoller = null\n\nconst config: Config = {\n    readOnlyChainId: ChainId.Mainnet,\n    readOnlyUrls: {\n      [ChainId.Mainnet]: 'https://mainnet.infura.io/v3/62687d1a985d4508b2b7a24827551934',\n    },\n  }\n\nexport default function MyApp(props) {\n    const {Component, pageProps} = props;\n\n    const [loading, setLoading] = React.useState(true)\n    const [syncing, setSyncing] = React.useState(false)\n\n    React.useEffect(() => {\n        // Remove the server-side injected CSS.\n        const jssStyles = document.querySelector('#jss-server-side');\n        if (jssStyles) {\n            jssStyles.parentElement.removeChild(jssStyles);\n        }\n\n        querySessions((sessions) => {\n            if (sessions.length > 0) {\n                setSyncing(true)\n\n                const pollSyncStatus = () => {\n                    querySyncStatus((status) => {\n                        switch (status) {\n                            case SyncNotStarted:\n                                break\n                            case Syncing:\n                                setSyncing(true);\n                                break;\n                            case SyncDone:\n                                clearInterval(syncStatusPoller);\n                                setLoading(false);\n                                setSyncing(false);\n                                break;\n                        }\n                    }).catch((err) => {\n                        console.error(err)\n                    })\n                }\n\n                syncStatusPoller = setInterval(pollSyncStatus, 1000)\n            } else {\n                // no session found, so we can not sync any data\n                setLoading(false)\n                setSyncing(false)\n            }\n        }).catch((err) => {\n            console.error(err)\n        })\n\n    }, []);\n\n    return (\n            <React.Fragment>\n                <Head>\n                    <title>BBGO</title>\n                    <meta name=\"viewport\" content=\"minimum-scale=1, initial-scale=1, width=device-width\"/>\n                </Head>\n                <ThemeProvider theme={theme}>\n                    {/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}\n                    <CssBaseline/>\n                    {\n                        loading ? (syncing ? (\n                            <React.Fragment>\n                                <Dialog\n                                    open={syncing}\n                                    aria-labelledby=\"alert-dialog-title\"\n                                    aria-describedby=\"alert-dialog-description\"\n                                >\n                                    <DialogTitle id=\"alert-dialog-title\">{\"Syncing Trades\"}</DialogTitle>\n                                    <DialogContent>\n                                        <DialogContentText id=\"alert-dialog-description\">\n                                            The environment is syncing trades from the exchange sessions.\n                                            Please wait a moment...\n                                        </DialogContentText>\n                                        <Box m={2}>\n                                            <LinearProgress/>\n                                        </Box>\n                                    </DialogContent>\n                                </Dialog>\n                            </React.Fragment>\n                        ) : (\n                            <React.Fragment>\n                                <Dialog\n                                    open={loading}\n                                    aria-labelledby=\"alert-dialog-title\"\n                                    aria-describedby=\"alert-dialog-description\"\n                                >\n                                    <DialogTitle id=\"alert-dialog-title\">{\"Loading\"}</DialogTitle>\n                                    <DialogContent>\n                                        <DialogContentText id=\"alert-dialog-description\">\n                                            Loading...\n                                        </DialogContentText>\n                                        <Box m={2}>\n                                            <LinearProgress/>\n                                        </Box>\n                                    </DialogContent>\n                                </Dialog>\n                            </React.Fragment>\n                        )) : (\n                            <Component {...pageProps}/>\n                        )\n                    }\n                </ThemeProvider>\n            </React.Fragment>\n    );\n}\n\nMyApp.propTypes = {\n    Component: PropTypes.elementType.isRequired,\n    pageProps: PropTypes.object.isRequired,\n};\n"]},"metadata":{},"sourceType":"module"}